@model IEnumerable<ALFINapp.Models.DetalleBase>

@{
    var DetalleGeneralCliente = ViewData["DetalleGeneralCliente"] as ALFINapp.Models.BaseCliente;
    var AsesoresGenerales = ViewData["AsesoresGeneral"] as IEnumerable<dynamic>;
}

@functions {
    public string GetColorCode(string colorName)
    {
        if (string.IsNullOrEmpty(colorName))
        {
            return "#FFFFFF";
        }
        return colorName.ToLower() switch
        {
            "verde" => "#008000",
            "amarillo" => "#FFFF00",
            "naranja" => "#FFA500",
            "rojo" => "#FF0000",
            "verde claro" => "#90EE90",
            "verde oscuro" => "#006400",
            "amarillo claro" => "#FFFFE0",
            "amarillo oscuro" => "#FFD700",
            "naranja claro" => "#FFDAB9",
            "naranja oscuro" => "#FF8C00",
            "rojo claro" => "#FF7F7F",
            "rojo oscuro" => "#8B0000",
            _ => "#FFFFFF"
        };
    }
}

<div class="container">
    <div class="row">
        <h3 class="label-fortip">Consulta de Campañas</h3>
        <div class="spacing"></div>
        <ul class="nav nav-pills" id="fuenteBaseTabs" role="tablist">
            @foreach (var datos in Model)
            {
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="fuenteBaseTab-@datos.TipoBase" data-bs-toggle="pill" role="tab"
                        aria-controls="fuenteBase-@datos.TipoBase" aria-selected="false"
                        onclick="cargarDatos('@datos.TipoBase')">
                        @datos.TipoBase
                    </a>
                </li>
            }
        </ul>
    </div>

    <div class="row mb-2">
        <div class="row mb-2 align-items-center">
            <div class="col-md-6">
                <label for="informacion_cliente">Información del Cliente:</label>
            </div>
            <div class="col-md-6">
                <input type="text" id="informacion_cliente" class="form-control"
                    value="@(DetalleGeneralCliente.XAppaterno + " " + DetalleGeneralCliente.XApmaterno + ", " + DetalleGeneralCliente.Dni)"
                    readonly>
            </div>
            @foreach (var AsesorPrimario in AsesoresGenerales)
            {
                <div class="alert alert-warning mt-4" role="alert">
                    El cliente tiene los siguientes asesores asignados:
                </div>
                <div class="form-group align-items-center mb-2">
                    <input type="text" id="asesor_primario" class="form-control"
                        value="@AsesorPrimario.NombreAsesorPrimario.ToUpper()" readonly>
                </div>
            }
        </div>
    </div>

    <input type="hidden" id="dni_cliente_reasignacion" value="@DetalleGeneralCliente.Dni">

    @foreach (var datos in Model)
    {
        <div id="detalle-campana_@datos.TipoBase" style="display: none;">
            <div class="alert alert-info mt-2" role="alert">
                El cliente a buscar tiene las siguientes ofertas asignadas
            </div>
            <div class="row mb-2">
                <div class="col">
                    <legend>
                        <h3>Condiciones de Campaña</h3>
                    </legend>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="color_y_tonalidad">Color y Tonalidad:</label>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex align-items-center">
                                <input class="form-control ml-2"
                                    style="background-color: @GetColorCode(datos.ColorFinal); width: 35px; height: 35px;"
                                    readonly>
                                <input class="form-control ml-2" id="COLOR_FINAL" type="text"
                                    value="@datos.ColorFinal.ToUpper()" readonly>
                            </div>
                            <div class="d-flex align-items-center">
                                <input class="form-control ml-2"
                                    style="background-color: @GetColorCode(datos.Color); width: 35px; height: 35px;"
                                    readonly>
                                <input class="form-control ml-2" id="COLOR" type="text" value="@datos.Color.ToUpper()"
                                    readonly>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="campaña">Campaña:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="campaña" class="form-control" value="@datos.Campaña" required readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="oferta_maxima">Oferta Máxima:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="oferta_maxima" class="form-control" value="@datos.OfertaMax" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="plazo_maximo">Plazo Máximo:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="plazo_maximo" class="form-control" value="@datos.Plazo" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="capacidad_de_pago">Capacidad de Pago:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="capacidad_de_pago" class="form-control" value="@datos.CapacidadMax"
                                required readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="deuda_con_alfin">Deuda con ALFIN:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="deuda_con_alfin" class="form-control"
                                value="@datos.SaldoDiferencialReeng" required readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="nuevo_en_base">Nuevo en BASE:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="nuevo_en_base" class="form-control" value="@datos.ClienteNuevo" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="deuda">Deudas:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="deuda" class="form-control"
                                value="@datos.Deuda1 - @datos.Deuda2 - @datos.Deuda3" required readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="nro_entidades">Nro Entidades:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="nro_entidades" class="form-control"
                                value="@datos.Entidad1 - @datos.Entidad2 - @datos.Entidad3" required readonly>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <h3>Tasas Aprobadas</h3>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_3k">Hasta S/ 3k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_3k" class="form-control" value="@datos.Tasa1" required readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_6_1k">Hasta S/ 6.1k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_6_1k" class="form-control" value="@datos.Tasa2" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_8_6k">Hasta S/ 8.6k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_8_6k" class="form-control" value="@datos.Tasa3" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_12_4k">Hasta S/ 12.4k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_12_4k" class="form-control" value="@datos.Tasa4" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_15_1k">Hasta S/ 15.1k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_15_1k" class="form-control" value="@datos.Tasa5" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="hasta_s_24_6k">Hasta S/ 24.6k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="hasta_s_24_6k" class="form-control" value="@datos.Tasa6" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="mas_de_s_24_6k">Mas de S/ 24.6k:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="mas_de_s_24_6k" class="form-control" value="@datos.Tasa7" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="nueva_tasa">Nueva Tasa:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="nueva_tasa" class="form-control" value="@datos.GrupoTasa" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="usuario_tipo">Usuario Tipo:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="usuario_tipo" class="form-control" value="@datos.Usuario" required
                                readonly>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-2">
                        <div class="col-md-6">
                            <label for="usuario_segmento">Usuario Segmento:</label>
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="usuario_segmento" class="form-control" value="@datos.SegmentoUser" required
                                readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }

    <div class="form-group row align-items-center">
        <div class="col-md-12">
            <a class="btn btn-primary" href="javascript:void(0);" onclick="TakeThisClient(@DetalleGeneralCliente.Dni)">Tipifique Este Cliente</a>
        </div>
    </div>
</div>